
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Generating Various Types of Graphs by Proximity" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://city2graph.net/examples/generating_graphs_by_proximity.html" />
<meta property="og:site_name" content="city2graph" />
<meta property="og:description" content="This notebook illustrates how to generate and visualize different spatial graph types based on proximity metrics (KNN, Delaunay, Gilbert, Waxman) using City2Graph, OSMnx, and NetworkX. Overview: Th..." />
<meta property="og:image" content="https://city2graph.net/_static/social_preview.png" />
<meta property="og:image:alt" content="city2graph" />
<meta name="description" content="This notebook illustrates how to generate and visualize different spatial graph types based on proximity metrics (KNN, Delaunay, Gilbert, Waxman) using City2Graph, OSMnx, and NetworkX. Overview: Th..." />

    <title>Generating Various Types of Graphs by Proximity &#8212; city2graph 0.1.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=88d739cf" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=01f34227"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'examples/generating_graphs_by_proximity';</script>
    <link rel="icon" href="../_static/city2graph_logo.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API Reference" href="../api/index.html" />
    <link rel="prev" title="Processing GTFS to Obtain Flows of Public Transportation" href="gtfs.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/city2graph_logo_wide.png" class="logo__image only-light" alt="city2graph 0.1.0 documentation - Home"/>
    <img src="../_static/city2graph_logo_wide_dark.png" class="logo__image only-dark pst-js-only" alt="city2graph 0.1.0 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contributing.html">
    Contributing
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/yu-ta-sato/city2graph" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contributing.html">
    Contributing
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/yu-ta-sato/city2graph" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="morphological_networks_from_overturemaps.html">Constructing Morphological Networks from Overture Maps</a></li>
<li class="toctree-l1"><a class="reference internal" href="gtfs.html">Processing GTFS to Obtain Flows of Public Transportation</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Generating Various Types of Graphs by Proximity</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Examples</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Generating Various Types of Graphs by Proximity</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="Generating-Various-Types-of-Graphs-by-Proximity">
<h1>Generating Various Types of Graphs by Proximity<a class="headerlink" href="#Generating-Various-Types-of-Graphs-by-Proximity" title="Link to this heading">#</a></h1>
<p>This notebook illustrates how to generate and visualize different spatial graph types based on proximity metrics (KNN, Delaunay, Gilbert, Waxman) using City2Graph, OSMnx, and NetworkX.</p>
<section id="Overview">
<h2>Overview<a class="headerlink" href="#Overview" title="Link to this heading">#</a></h2>
<p>This notebook covers:</p>
<ul class="simple">
<li><p>Setting up the environment and importing libraries</p></li>
<li><p>Retrieving points of interest around a location</p></li>
<li><p>Defining helper functions for node extraction and plotting</p></li>
<li><p>Generating and visualizing KNN, Delaunay, Gilbert, and Waxman graphs interactively</p></li>
</ul>
</section>
<section id="1.-Setup-and-Environment">
<h2>1. Setup and Environment<a class="headerlink" href="#1.-Setup-and-Environment" title="Link to this heading">#</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import city2graph
import networkx as nx
import osmnx as ox

import matplotlib.pyplot as plt
import contextily as ctx

import ipywidgets as widgets
from IPython.display import display
</pre></div>
</div>
</div>
</section>
<section id="2.-Retrieve-Points-of-Interest">
<h2>2. Retrieve Points of Interest<a class="headerlink" href="#2.-Retrieve-Points-of-Interest" title="Link to this heading">#</a></h2>
<p>Fetch restaurant POIs around Shibuya, Tokyo using OSMnx and filter to nodes only.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>poi_tags = {
    &quot;amenity&quot;: [
        &quot;restaurant&quot;]}

#poi_gdf = ox.features_from_place(&quot;Shibuya, Tokyo, Japan&quot;, poi_tags)
poi_gdf = ox.features_from_point(
    (35.658514, 139.70133),  # Tokyo Tower coordinates
    tags=poi_tags,
    dist=1000  # Search radius in meters
    )

# Filter to include only nodes, not ways and relations
poi_gdf = poi_gdf[poi_gdf.index.get_level_values(&#39;element&#39;) == &#39;node&#39;]

# Reproject to a projected CRS for accurate centroids
poi_gdf = poi_gdf.to_crs(epsg=6677)
</pre></div>
</div>
</div>
</section>
<section id="3.-Define-Helper-Functions">
<h2>3. Define Helper Functions<a class="headerlink" href="#3.-Define-Helper-Functions" title="Link to this heading">#</a></h2>
<p>Define functions to extract node positions and plot graphs with degree centrality and optional basemap.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>def get_node_positions(gdf):
    &quot;&quot;&quot;Extract node positions from GeoDataFrame.&quot;&quot;&quot;
    node_positions = {}
    for id, geom in gdf[&#39;geometry&#39;].items():
        if geom.geom_type == &#39;Point&#39;:
            node_positions[id] = (geom.x, geom.y)
        else:
            centroid = geom.centroid
            node_positions[id] = (centroid.x, centroid.y)
    return node_positions

def plot_graph(graph, title, node_positions, node_color=&#39;skyblue&#39;, edge_color=&#39;gray&#39;,
               add_basemap=False, crs=None):
    &quot;&quot;&quot;Plot a network graph with color-coded nodes based on degree centrality.&quot;&quot;&quot;
    # Compute degree centrality for node coloring
    node_degrees = dict(graph.degree())
    node_colors = [node_degrees.get(node, 0) for node in graph.nodes()]

    # Create the plot
    fig, ax = plt.subplots(figsize=(12, 10))

    # Set equal aspect ratio to maintain map proportions
    ax.set_aspect(&#39;equal&#39;)

    # Plot the edges with better color
    nx.draw_networkx_edges(graph, pos=node_positions,
                          edge_color=&quot;grey&quot;,
                          alpha=0.5,
                          width=0.5,
                          ax=ax)

    # Plot the POIs with beautiful color scheme
    nodes = nx.draw_networkx_nodes(graph, pos=node_positions,
                          node_size=30,
                          node_color=node_colors,
                          cmap=plt.cm.plasma,
                          alpha=0.9,
                          linewidths=0.5,
                          ax=ax)

    # Add basemap if requested - with no buffer/margin
    if add_basemap and crs:
        ctx.add_basemap(ax, crs=crs, source=ctx.providers.CartoDB.Positron)

    # Set exact limits based on node positions to avoid any buffer
    node_xs = [pos[0] for pos in node_positions.values()]
    node_ys = [pos[1] for pos in node_positions.values()]
    ax.set_xlim(min(node_xs), max(node_xs))
    ax.set_ylim(min(node_ys), max(node_ys))

    # Add a colorbar with better styling
    cbar = plt.colorbar(nodes, ax=ax, label=&#39;Degree Centrality&#39;, shrink=0.8)
    cbar.ax.tick_params(labelsize=10)

    plt.title(title, fontsize=14, fontweight=&#39;bold&#39;, pad=20)
    plt.axis(&#39;off&#39;)
    plt.tight_layout()
    plt.show()

node_positions = get_node_positions(poi_gdf)
</pre></div>
</div>
</div>
</section>
<section id="4.-K-Nearest-Neighbors-(KNN)-Graph">
<h2>4. K-Nearest Neighbors (KNN) Graph<a class="headerlink" href="#4.-K-Nearest-Neighbors-(KNN)-Graph" title="Link to this heading">#</a></h2>
<p>Create an interactive slider to plot KNN graphs for varying k values.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>def plot_knn_graph(k_value):
    &quot;&quot;&quot;Interactive plotting function for KNN graphs.&quot;&quot;&quot;
    knn_graph = city2graph.knn_graph(poi_gdf, k=k_value)
    plot_graph(knn_graph,
               f&#39;KNN Graph (k={k_value}) of Restaurants in Shibuya, Tokyo&#39;,
               node_positions,
               edge_color=&#39;gray&#39;,
               add_basemap=True,
               crs=poi_gdf.crs)

# Create interactive widget with centered and longer slider
k_slider = widgets.IntSlider(
    value=1,
    min=1,
    max=100,
    description=&#39;k:&#39;,
    continuous_update=False,
    layout=widgets.Layout(width=&#39;100%&#39;, margin=&#39;0 auto&#39;),
    style={&#39;description_width&#39;: &#39;initial&#39;}
)

# Create container to center the slider
slider_container = widgets.HBox([k_slider], layout=widgets.Layout(justify_content=&#39;center&#39;))

interactive_plot = widgets.interactive(plot_knn_graph, k_value=k_slider)
interactive_plot.children = (slider_container,) + interactive_plot.children[1:]
display(interactive_plot)
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "dee4cd64b7fd435082171e4fb32b4c8f", "version_major": 2, "version_minor": 0}</script></div>
</div>
</section>
<section id="5.-Delaunay-Graph">
<h2>5. Delaunay Graph<a class="headerlink" href="#5.-Delaunay-Graph" title="Link to this heading">#</a></h2>
<p>Generate and plot a Delaunay triangulation graph of the POIs.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>delaunay_graph = city2graph.delaunay_graph(poi_gdf)

# Use the existing plot_graph function with basemap
plot_graph(delaunay_graph,
           &#39;Delaunay Graph of Restaurants in Shibuya, Tokyo&#39;,
           node_positions,
           node_color=&#39;skyblue&#39;,
           edge_color=&#39;gray&#39;,
           add_basemap=True,
           crs=poi_gdf.crs)
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/examples_generating_graphs_by_proximity_11_0.png" src="../_images/examples_generating_graphs_by_proximity_11_0.png" />
</div>
</div>
</section>
<section id="6.-Gilbert-Graph-(Hard-Threshold-Model)">
<h2>6. Gilbert Graph (Hard Threshold Model)<a class="headerlink" href="#6.-Gilbert-Graph-(Hard-Threshold-Model)" title="Link to this heading">#</a></h2>
<p>Interactive slider for creating Gilbert graphs with varying radius values.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>def plot_gilbert_graph(r_value):
    &quot;&quot;&quot;Interactive plotting function for Gilbert graphs.&quot;&quot;&quot;
    gilbert_graph_temp = city2graph.gilbert_graph(poi_gdf, radius=r_value)

    plot_graph(gilbert_graph_temp,
               f&#39;Gilbert Graph (radius={r_value}m) of Restaurants in Shibuya, Tokyo&#39;,
               node_positions,
               edge_color=&#39;gray&#39;,
               add_basemap=True,
               crs=poi_gdf.crs)

# Get node positions once (reuse the existing variable)
if &#39;node_positions&#39; not in locals():
    node_positions = get_node_positions(poi_gdf)

# Create interactive widget with centered and longer slider
r_slider = widgets.IntSlider(
    value=0,
    min=0,
    max=1000,
    step=1,
    description=&#39;radius:&#39;,
    continuous_update=False,
    layout=widgets.Layout(width=&#39;100%&#39;, margin=&#39;0 auto&#39;),
    style={&#39;description_width&#39;: &#39;initial&#39;}
)

# Create container to center the slider
slider_container = widgets.HBox([r_slider], layout=widgets.Layout(justify_content=&#39;center&#39;))

interactive_plot = widgets.interactive(plot_gilbert_graph, r_value=r_slider)
interactive_plot.children = (slider_container,) + interactive_plot.children[1:]
display(interactive_plot)
<br/><br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "fe23db7b44b5419882bb5ff86d591473", "version_major": 2, "version_minor": 0}</script></div>
</div>
</section>
<section id="7.-Waxman-Graph-(Soft-Random-Geometry-Model)">
<h2>7. Waxman Graph (Soft Random Geometry Model)<a class="headerlink" href="#7.-Waxman-Graph-(Soft-Random-Geometry-Model)" title="Link to this heading">#</a></h2>
<p>Interactive sliders to generate Waxman graphs with adjustable r0 and beta parameters. The probability of connection follows below:</p>
<div class="math notranslate nohighlight">
\[H_{ij} = \beta e^{-\frac{d_{ij}}{r_0}}\]</div>
<p>where <span class="math notranslate nohighlight">\(d_{ij}\)</span> is the Euclidean distance between node <span class="math notranslate nohighlight">\(i\)</span> an <span class="math notranslate nohighlight">\(j\)</span>; <span class="math notranslate nohighlight">\(r_0\)</span> is the maximum distance between nodes; and <span class="math notranslate nohighlight">\(\beta\)</span> denotes the scaling parameter.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span># Use the plot_graph function from Cell 4 instead of redefining it

def plot_waxman_graph(r0_value, beta_value):
    &quot;&quot;&quot;Interactive plotting function for Waxman graphs.&quot;&quot;&quot;
    waxman_graph_temp = city2graph.waxman_graph(gdf=poi_gdf, r0=r0_value, beta=beta_value)

    plot_graph(waxman_graph_temp,
               f&#39;Waxman Graph (r0={r0_value}, beta={beta_value:.2f}) of Restaurants in Shibuya, Tokyo&#39;,
               node_positions,
               edge_color=&#39;gray&#39;,
               add_basemap=True,
               crs=poi_gdf.crs)

# Create interactive widgets for Waxman graph parameters
r0_slider = widgets.IntSlider(
    value=0,
    min=1,
    max=1000,
    step=1,
    description=&#39;r0:&#39;,
    continuous_update=False,
    layout=widgets.Layout(width=&#39;48%&#39;),
    style={&#39;description_width&#39;: &#39;initial&#39;}
)

beta_slider = widgets.FloatSlider(
    value=0,
    min=0,
    max=1.0,
    step=0.01,
    description=&#39;beta:&#39;,
    continuous_update=False,
    layout=widgets.Layout(width=&#39;48%&#39;),
    style={&#39;description_width&#39;: &#39;initial&#39;}
)

# Create container to center both sliders side by side
sliders_container = widgets.HBox([r0_slider, beta_slider],
                                layout=widgets.Layout(justify_content=&#39;center&#39;))

interactive_plot = widgets.interactive(plot_waxman_graph, r0_value=r0_slider, beta_value=beta_slider)
interactive_plot.children = (sliders_container,) + interactive_plot.children[2:]
display(interactive_plot)
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "05f8d0fbb9db4a85a9367e5312d6942b", "version_major": 2, "version_minor": 0}</script></div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="gtfs.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Processing GTFS to Obtain Flows of Public Transportation</p>
      </div>
    </a>
    <a class="right-next"
       href="../api/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">API Reference</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#1.-Setup-and-Environment">1. Setup and Environment</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#2.-Retrieve-Points-of-Interest">2. Retrieve Points of Interest</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#3.-Define-Helper-Functions">3. Define Helper Functions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#4.-K-Nearest-Neighbors-(KNN)-Graph">4. K-Nearest Neighbors (KNN) Graph</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#5.-Delaunay-Graph">5. Delaunay Graph</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#6.-Gilbert-Graph-(Hard-Threshold-Model)">6. Gilbert Graph (Hard Threshold Model)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#7.-Waxman-Graph-(Soft-Random-Geometry-Model)">7. Waxman Graph (Soft Random Geometry Model)</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/examples/generating_graphs_by_proximity.ipynb.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      Â© Copyright 2025, Yuta Sato &amp; city2graph developers.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>